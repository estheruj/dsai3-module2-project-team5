// dbdiagram.io

Table customers {
  customer_id string [pk]
  customer_unique_id string
  customer_zip_code_prefix string // Joins to geolocation
  customer_city string
  customer_state string
}

Table geolocation {
  geolocation_zip_code_prefix string [pk]
  geolocation_lat string
  geolocation_lng string
  geolocation_city string
  geolocation_state string
}

Table order_items {
  order_id string [pk] // Composite Primary Key part
  order_item_id integer [pk] // Composite Primary Key part (Inferred as INT)
  product_id string
  seller_id string
  shipping_limit_date timestamp // Inferred Type
  price numeric // Inferred Type
  freight_value numeric // Inferred Type
}

Table order_payments {
  order_id string
  payment_sequential integer // Inferred Type
  payment_type string
  payment_installments integer // Inferred Type
  payment_value numeric // Inferred Type
}

Table order_reviews {
  review_id string [pk]
  order_id string
  review_score integer // Inferred Type
  review_comment_title string
  review_comment_message string
  review_creation_date date // Inferred Type
  review_answer_timestamp timestamp // Inferred Type
}

Table orders {
  order_id string [pk]
  customer_id string
  order_status string
  order_purchase_timestamp timestamp // Inferred Type
  order_approved_at timestamp // Inferred Type
  order_delivered_carrier_date timestamp // Inferred Type
  order_delivered_customer_date timestamp // Inferred Type
  order_estimated_delivery_date timestamp // Inferred Type
}

Table product_category_name_translation {
  product_id string [pk]
  product_category_name string
  product_category_name_english string
}

Table products {
  product_id string [pk]
  product_category_name string
  product_name_lenght integer // Inferred Type
  product_description_lenght integer // Inferred Type
  product_photos_qty integer // Inferred Type
  product_weight_g numeric // Inferred Type
  product_length_cm numeric // Inferred Type
  product_height_cm numeric // Inferred Type
  product_width_cm numeric // Inferred Type
}

Table sellers {
  seller_id string [pk]
  seller_zip_code_prefix string // Joins to geolocation
  seller_city string
  seller_state string
}

// CUSTOMER and SELLER GEOLOCATION
Ref: customers.customer_zip_code_prefix > geolocation.geolocation_zip_code_prefix
Ref: sellers.seller_zip_code_prefix > geolocation.geolocation_zip_code_prefix

// CORE ORDER FLOW
Ref: order_items.order_id > orders.order_id
Ref: order_payments.order_id > orders.order_id
Ref: order_reviews.order_id > orders.order_id
Ref: orders.customer_id > customers.customer_id

// PRODUCT AND SELLERS
Ref: order_items.product_id > products.product_id
Ref: order_items.seller_id > sellers.seller_id
Ref: products.product_category_name > product_category_name_translation.product_category_name